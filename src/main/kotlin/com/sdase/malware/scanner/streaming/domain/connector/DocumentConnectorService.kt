package com.sdase.malware.scanner.streaming.domain.connector

import org.springframework.core.io.InputStreamResource
import org.springframework.core.io.Resource
import org.springframework.stereotype.Service
import org.springframework.web.reactive.function.client.WebClient

@Service
class DocumentConnectorService(
    private val webClient: WebClient
) {
    fun getDocument(uri: String): InputStreamResource {

        return webClient
            .get()
            .uri(uri)
            .retrieve()
            .bodyToFlux(InputStreamResource::class.java)
            .blockFirst()!!
    }
}